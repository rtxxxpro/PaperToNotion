<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h3>Paper to Notion</h3>
  
  <details>
    <summary>‚öôÔ∏è Configure Notion & Path</summary>
    <div class="config-section">
      <input type="password" id="notionToken" placeholder="Notion API Token (secret_...)">
      <input type="text" id="notionDbId" placeholder="Notion Database ID">
      <input type="text" id="subfolder" placeholder="Download subfolder name">
    </div>
  </details>

  <textarea id="bibInput" placeholder="Waiting for BibTeX detection... Paste manually if it fails"></textarea>
  
  <div class="button-group">
    <button id="mainActionBtn" class="green-btn">üöÄ Parse, Download, and Sync</button>
  </div>
  
  <div id="status">Detecting page content...</div>

  <div id="debugLog" style="display:none; background:#333; color:#0f0; padding:8px; font-size:10px; margin-bottom:10px; max-height:80px; overflow:auto;">
    <pre id="logContent" style="margin:0; white-space:pre-wrap;"></pre>
  </div>

  <div id="result">
    <div class="field">
      <div class="field-label">
        <strong>Title</strong>
        <input type="text" id="fieldTitle" class="field-map-input" placeholder="Notion property" />
      </div>
      <div class="field-value" id="titleValue">
        <span id="outTitle">-</span>
      </div>
    </div>
    <div class="field">
      <div class="field-label">
        <strong>Proceedings Title</strong>
        <input type="text" id="fieldMeeting" class="field-map-input" placeholder="Notion property" />
      </div>
      <div class="field-value" id="meetingValue">
        <span id="outMeeting">-</span>
      </div>
    </div>
    <div class="field">
      <div class="field-label">
        <strong>Conference</strong>
        <input type="text" id="fieldConference" class="field-map-input" placeholder="Notion property" />
      </div>
      <div class="field-value" id="conferenceValue">
        <span id="outConference">-</span>
      </div>
    </div>
    <div class="field">
      <div class="field-label">
        <strong>Year</strong>
        <input type="text" id="fieldYear" class="field-map-input" placeholder="Notion property" />
      </div>
      <div class="field-value" id="yearValue">
        <span id="outYear">-</span>
      </div>
    </div>
    <div class="field">
      <div class="field-label">
        <strong>URL</strong>
        <input type="text" id="fieldUrl" class="field-map-input" placeholder="Notion property" />
      </div>
      <div class="field-value" id="urlValue">
        <a id="outLink" href="#" target="_blank" style="display:none;">View source</a>
        <span id="linkPlaceholder">-</span>
      </div>
    </div>
    <div class="field">
      <div class="field-label">
        <strong>PDF Link</strong>
        <input type="text" id="fieldPdfLink" class="field-map-input" placeholder="Notion property" />
      </div>
      <div class="field-value" id="pdfLinkValue">
        <a id="outPdfLink" href="#" target="_blank" style="display:none;">Open PDF</a>
        <span id="pdfLinkPlaceholder">-</span>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>